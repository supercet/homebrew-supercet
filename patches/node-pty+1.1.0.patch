diff --git a/node_modules/node-pty/lib/unixTerminal.js b/node_modules/node-pty/lib/unixTerminal.js
index 1234567..abcdefg 100644
--- a/node_modules/node-pty/lib/unixTerminal.js
+++ b/node_modules/node-pty/lib/unixTerminal.js
@@ -30,6 +30,23 @@ var helperPath = native.dir + '/spawn-helper';
 helperPath = path.resolve(__dirname, helperPath);
 helperPath = helperPath.replace('app.asar', 'app.asar.unpacked');
 helperPath = helperPath.replace('node_modules.asar', 'node_modules.asar.unpacked');
+// In pkg/yao-pkg, files under /snapshot are not executable. Copy the helper
+// to a real temp file and mark it executable.
+if (process.pkg) {
+    try {
+        var os = require("os");
+        var crypto = require("crypto");
+        var tmp = path.join(
+            os.tmpdir(),
+            "node-pty-spawn-helper-" + process.platform + "-" + process.arch + "-" + crypto.randomBytes(6).toString("hex")
+        );
+        fs.copyFileSync(helperPath, tmp);
+        fs.chmodSync(tmp, 0o755);
+        helperPath = tmp;
+    } catch (e) {
+        console.error("Failed to materialize spawn-helper:", e);
+    }
+}
 var DEFAULT_FILE = 'sh';
 var DEFAULT_NAME = 'xterm';
 var DESTROY_SOCKET_TIMEOUT_MS = 200;
